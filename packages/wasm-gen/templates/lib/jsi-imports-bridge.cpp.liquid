{% render "header.liquid" %}
#include "jsi-imports-bridge.h"

using namespace facebook;

#ifdef __cplusplus
extern "C" {
#endif

{% for import in importedFunctions %}
/* import: '{{ import.module }}' '{{ import.name }}' */
{%- capture params -%}
{%- for param_type in import.cParams -%}
  , {{ param_type }} arg{{ forloop.index0 }}
{%- endfor %}
{%- endcapture %}
{{ import.returnType }} w2c_{{ import.module | mangle_module_name }}_{{ import.name | mangle_name }}(w2c_{{ import.module | mangle_module_name }}* ctx{{ params }}) {
  auto fn = ctx->importObj.getPropertyAsFunction(ctx->rt, "{{ import.name }}");

  {% if import.hasReturn -%}
    return
  {%- endif %} fn.call(ctx->rt, {
    {%- for param in import.cParams -%}
      jsi::Value { (double)arg{{ forloop.index0 }} }
      {%- unless forloop.last -%},{%- endunless -%}
    {% endfor -%}
  })
  {%- if import.hasReturn -%}.asNumber(){%- endif -%};
}
{% endfor %}

#ifdef __cplusplus
}
#endif

